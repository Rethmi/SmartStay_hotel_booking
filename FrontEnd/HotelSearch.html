<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Luxury Stays - Find Your Perfect Hotel</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- AOS Animation Library -->
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

  <style>
    :root {
      --primary: #3a86ff;
      --primary-dark: #2563eb;
      --secondary: #0f0754;
      --accent: #ff9e01;
      --light: #f8f9fa;
      --dark: #212529;
      --gray: #6c757d;
      --light-gray: #e9ecef;
      --border-radius: 12px;
      --box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
      --transition: all 0.3s ease;
    }

    body {
      font-family: 'Inter', sans-serif;
      color: var(--dark);
      background-color: #fcfcfc;
      overflow-x: hidden;
    }

    h1, h2, h3, h4, h5, h6 {
      font-family: 'Playfair Display', serif;
      font-weight: 700;
    }

    /* Navigation */
    .navbar {
      padding: 1rem 0;
      transition: var(--transition);
      background-color: rgba(255, 255, 255, 0.95);
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    }

    .navbar-scrolled {
      padding: 0.5rem 0;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }

    .navbar-brand img {
      height: 50px;
    }

    /* Hero Section */
    .hero-section {
      background: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('./assets/images/image.png') center/cover no-repeat;
      min-height: 70vh;
      display: flex;
      align-items: center;
      color: white;
      position: relative;
      margin-top: 76px;
    }

    .hero-content {
      max-width: 700px;
    }

    .hero-title {
      font-size: 3.5rem;
      margin-bottom: 1.5rem;
      line-height: 1.2;
    }

    .hero-subtitle {
      font-size: 1.25rem;
      margin-bottom: 2rem;
      font-weight: 300;
    }

    /* Search Section */
    .search-section {
      background: white;
      border-radius: var(--border-radius);
      padding: 2.5rem;
      box-shadow: var(--box-shadow);
      margin-top: -80px;
      position: relative;
      z-index: 10;
    }

    .search-form .form-control {
      padding: 0.8rem 1.2rem;
      border-radius: var(--border-radius);
      border: 1px solid var(--light-gray);
      height: calc(2.8em + 0.75rem + 2px);
    }

    .search-form .form-label {
      font-weight: 500;
      margin-bottom: 0.5rem;
      color: var(--dark);
    }

    .btn-primary {
      background-color: var(--primary);
      border-color: var(--primary);
      padding: 0.8rem 1.5rem;
      border-radius: var(--border-radius);
      font-weight: 500;
      transition: var(--transition);
    }

    .btn-primary:hover {
      background-color: var(--primary-dark);
      border-color: var(--primary-dark);
      transform: translateY(-2px);
    }

    .btn-secondary {
      background-color: var(--secondary);
      border-color: var(--secondary);
      padding: 0.8rem 1.5rem;
      border-radius: var(--border-radius);
      font-weight: 500;
      transition: var(--transition);
    }

    .btn-secondary:hover {
      background-color: #0a0540;
      border-color: #0a0540;
      transform: translateY(-2px);
    }

    /* Section Titles */
    .section-title {
      position: relative;
      margin-bottom: 2.5rem;
      padding-bottom: 1rem;
    }

    .section-title:after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 60px;
      height: 3px;
      background: var(--primary);
    }

    .section-title.center:after {
      left: 50%;
      transform: translateX(-50%);
    }

    /* Hotel Cards */
    .hotel-card {
      border-radius: var(--border-radius);
      overflow: hidden;
      box-shadow: var(--box-shadow);
      transition: var(--transition);
      height: 100%;
      border: none;
      margin-bottom: 1.5rem;
    }

    .hotel-card:hover {
      transform: translateY(-10px);
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
    }

    .hotel-image {
      height: 250px;
      object-fit: cover;
      transition: transform 0.5s ease;
    }

    .hotel-card:hover .hotel-image {
      transform: scale(1.05);
    }

    .hotel-card .card-body {
      padding: 1.5rem;
    }

    .hotel-card .card-title {
      margin-bottom: 0.75rem;
      font-size: 1.25rem;
    }

    .hotel-location {
      color: var(--gray);
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
    }

    .hotel-description {
      color: var(--gray);
      margin-bottom: 1.5rem;
      line-height: 1.6;
    }

    .rating {
      color: #ffc107;
      margin-bottom: 0.75rem;
    }

    .seeAvailability {
      background: linear-gradient(45deg, var(--primary), var(--accent));
      border: none;
      color: white;
      padding: 0.75rem 1.5rem;
      border-radius: 50px;
      font-weight: 500;
      transition: var(--transition);
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .seeAvailability:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 15px rgba(58, 134, 255, 0.3);
      color: white;
    }

    /* Loading and No Results */
    .hotel-loading {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 300px;
    }

    .loading-spinner {
      width: 50px;
      height: 50px;
      border: 5px solid #f3f3f3;
      border-top: 5px solid var(--primary);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .no-results {
      text-align: center;
      padding: 3rem 1rem;
    }

    .no-results i {
      font-size: 4rem;
      margin-bottom: 1rem;
      color: var(--light-gray);
    }

    /* CTA Section */
    .cta-section {
      background: linear-gradient(rgba(15, 7, 84, 0.9), rgba(15, 7, 84, 0.9)), url('./assets/images/image.png') center/cover no-repeat;
      padding: 5rem 0;
      color: white;
      border-radius: var(--border-radius);
    }

    /* Footer */
    .footer {
      background-color: var(--secondary);
      color: white;
      padding: 4rem 0 2rem;
    }

    .footer a {
      color: rgba(255, 255, 255, 0.8);
      text-decoration: none;
      transition: var(--transition);
    }

    .footer a:hover {
      color: white;
    }

    .footer-title {
      font-size: 1.25rem;
      margin-bottom: 1.5rem;
      position: relative;
      padding-bottom: 0.75rem;
    }

    .footer-title:after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 40px;
      height: 2px;
      background: var(--primary);
    }

    .social-links a {
      display: inline-block;
      width: 40px;
      height: 40px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 50%;
      text-align: center;
      line-height: 40px;
      margin-right: 0.5rem;
    }

    .social-links a:hover {
      background: var(--primary);
    }

    /* Back to top button */
    .back-to-top {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: var(--primary);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      text-decoration: none;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      z-index: 100;
      opacity: 0;
      transition: var(--transition);
    }

    .back-to-top.show {
      opacity: 1;
    }

    /* Responsive Adjustments */
    @media (max-width: 992px) {
      .hero-title {
        font-size: 2.5rem;
      }
    }

    @media (max-width: 768px) {
      .hero-title {
        font-size: 2rem;
      }
      
      .search-section {
        margin-top: -40px;
      }
      
      .section-title {
        font-size: 1.75rem;
      }
    }
  </style>
</head>

<body>
  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top shadow-sm" id="mainNav">
  <div class="container">
    <a class="navbar-brand fw-bold" href="#">
      <img src="./assets/images/HotelLogo.png" alt="Luxury Stays" height="40" class="me-2">
      Luxury Stays
    </a>

    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav mx-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a class="nav-link active" href="#hero">Home</a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="#hotels-section">Hotels</a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="#destinations-section">Destinations</a>
        </li>
        
        <!-- <li class="nav-item">
          <a class="nav-link" href="#about-section">About Us</a>
        </li> -->
         <li class="nav-item">
          <a class="nav-link" href="#gallery-section">Gallery</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#contact-section">Contact</a>
        </li>
      </ul>

      <div class="d-flex align-items-center">
        <button class="btn btn-outline-light me-2" id="authBtn" onclick="toggleAuth()">Log Out</button>
        <!-- <a class="btn btn-primary" href="#" id="profileBtn" onclick="toggleSidebar()">
          <i class="fas fa-user-circle me-1"></i> Profile
        </a> -->
      </div>
    </div>
  </div>
</nav>

  <!-- Hero Section -->
  <section class="hero-section">
    <div class="container">
      <div class="hero-content" data-aos="fade-right">
        <h1 class="hero-title">Discover Your Perfect Stay</h1>
        <p class="hero-subtitle">Explore the finest hotels across Sri Lanka. From beachfront resorts to mountain retreats, find the perfect accommodation for your next adventure.</p>
        <div class="d-flex gap-3 flex-wrap">
          <button class="btn btn-primary" onclick="scrollToSearch()">Search Hotels</button>
          <a href="CustomerDashboard.html" class="btn btn-outline-light">
            <i class="fas fa-arrow-left me-2"></i>Back to Home
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Search Section -->
  <section class="container" id="searchSection">
    <div class="search-section" data-aos="fade-up">
      <h3 class="text-center mb-4">Find Your Perfect Stay</h3>
      <form class="tour-search-form row g-3">
        <div class="col-md-4">
          <label for="destination" class="form-label">Destination</label>
          <input type="text" class="form-control" id="destination" placeholder="Where are you going?">
        </div>
        <div class="col-md-2">
          <label for="roomType" class="form-label">Room Type</label>
          <select class="form-select" id="roomType">
            <option value="single">Single</option>
            <option value="double" selected>Double</option>
            <option value="suite">Suite</option>
          </select>
        </div>
        <div class="col-md-2">
          <label for="checkin" class="form-label">Check In</label>
          <input type="date" class="form-control" id="checkin">
        </div>
        <div class="col-md-2">
          <label for="checkout" class="form-label">Check Out</label>
          <input type="date" class="form-control" id="checkout">
        </div>
        <div class="col-md-2 d-flex align-items-end">
          <button type="submit" class="btn btn-primary w-100">
            <i class="fas fa-search me-2"></i>Search
          </button>
        </div>
      </form>
    </div>
  </section>

  <!-- Hotel List -->
  <section class="py-5">
    <div class="container">
      <div class="text-center mb-5" data-aos="fade-up">
        <h2 class="section-title center">Available Hotels</h2>
        <p class="text-muted">Browse our curated selection of premium accommodations across Sri Lanka</p>
      </div>
      
      <div class="row g-4 justify-content-center" id="hotelsContainer"></div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="py-5">
    <div class="container">
      <div class="cta-section text-center rounded-3" data-aos="fade-up">
        <h2 class="mb-4">Ready For Unforgettable Travel?</h2>
        <p class="mb-4 mx-auto" style="max-width: 600px;">Enjoy seamless hotel bookings with Luxury Stays. Your comfort, our priority.</p>
        <button class="btn btn-primary btn-lg">Contact Us Now</button>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="row">
        <div class="col-lg-4 mb-4 mb-lg-0">
          <h4 class="footer-title">Luxury Stays</h4>
          <p>Smart Hotel Booking brings you the best hotels in Sri Lanka with an effortless booking process.</p>
          <div class="social-links mt-4">
            <a href="#"><i class="fab fa-facebook-f"></i></a>
            <a href="#"><i class="fab fa-twitter"></i></a>
            <a href="#"><i class="fab fa-instagram"></i></a>
            <a href="#"><i class="fab fa-linkedin-in"></i></a>
          </div>
        </div>
        <div class="col-lg-4 mb-4 mb-lg-0">
          <h4 class="footer-title">Contact Info</h4>
          <ul class="list-unstyled">
            <li class="mb-2"><i class="fas fa-map-marker-alt me-2"></i> Sri Lanka</li>
            <li class="mb-2"><i class="fas fa-phone me-2"></i> +01 (123) 4567 90</li>
            <li class="mb-2"><i class="fas fa-envelope me-2"></i> SmartHotelBooking@gmail.com</li>
          </ul>
        </div>
        <div class="col-lg-4">
          <h4 class="footer-title">Newsletter</h4>
          <p>Subscribe to our newsletter for updates and special offers!</p>
          <form class="mt-3">
            <div class="input-group">
              <input type="email" class="form-control" placeholder="Your Email">
              <button class="btn btn-primary" type="submit">Subscribe</button>
            </div>
          </form>
        </div>
      </div>
      <hr class="my-4">
      <div class="row align-items-center">
        <div class="col-md-6">
          <p class="mb-0">&copy; 2025 Luxury Stays. All rights reserved</p>
        </div>
        <div class="col-md-6 text-md-end">
          <a href="#" class="me-3">Privacy Policy</a>
          <a href="#" class="me-3">Terms & Conditions</a>
          <a href="#">FAQ</a>
        </div>
      </div>
    </div>
  </footer>

  <!-- Back to Top Button -->
  <a href="#" class="back-to-top">
    <i class="fas fa-arrow-up"></i>
  </a>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  
  <!-- SweetAlert2 JS -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.all.min.js"></script>

  <script>
    // Initialize AOS animation
    AOS.init({
      duration: 800,
      easing: 'ease-in-out',
      once: true
    });

    // Navbar scroll effect
    window.addEventListener('scroll', function() {
      const navbar = document.getElementById('mainNav');
      const backToTop = document.querySelector('.back-to-top');
      
      if (window.scrollY > 50) {
        navbar.classList.add('navbar-scrolled');
      } else {
        navbar.classList.remove('navbar-scrolled');
      }
      
      if (window.scrollY > 300) {
        backToTop.classList.add('show');
      } else {
        backToTop.classList.remove('show');
      }
    });

    // Set default dates
    window.onload = function() {
      const today = new Date();
      const tomorrow = new Date(today);
      tomorrow.setDate(tomorrow.getDate() + 1);
      
      document.getElementById('checkin').value = today.toISOString().split('T')[0];
      document.getElementById('checkout').value = tomorrow.toISOString().split('T')[0];
      
      // Load saved search parameters if they exist
      const savedDestination = localStorage.getItem("destination");
      const savedCheckin = localStorage.getItem("checkin");
      const savedCheckout = localStorage.getItem("checkout");
      const savedPeople = localStorage.getItem("people");

      if (savedDestination) $("#destination").val(savedDestination);
      if (savedCheckin) $("#checkin").val(savedCheckin);
      if (savedCheckout) $("#checkout").val(savedCheckout);
      if (savedPeople) $("#roomType").val(savedPeople);

      // If we have search parameters, perform the search
      if (savedDestination || savedCheckin || savedCheckout || savedPeople) {
        fetchHotels();
      }
    };

    // Back to top button
    document.querySelector('.back-to-top').addEventListener('click', (e) => {
      e.preventDefault();
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });

    // Scroll to search section
    function scrollToSearch() {
      document.getElementById('searchSection').scrollIntoView({ behavior: 'smooth' });
    }

    // Form submission
    $(".tour-search-form").submit(function (e) {
      e.preventDefault();

      // Save search parameters to localStorage
      localStorage.setItem("destination", $("#destination").val());
      localStorage.setItem("checkin", $("#checkin").val());
      localStorage.setItem("checkout", $("#checkout").val());
      localStorage.setItem("people", $("#roomType").val());

      fetchHotels();
    });

    // SweetAlert notifications
    function showAlert(icon, title, text) {
      Swal.fire({
        icon: icon,
        title: title,
        text: text,
        timer: 3000,
        showConfirmButton: false
      });
    }

    function fetchHotels() {
      const people = $("#roomType").val();
      const checkin = $("#checkin").val();
      const checkout = $("#checkout").val();
      const destination = $("#destination").val()?.trim().toLowerCase() || "";

      if (new Date(checkin) >= new Date(checkout)) {
        showAlert('warning', 'Invalid Dates', 'Check-out date must be after check-in date');
        return;
      }

      $("#hotelsContainer").html(`
        <div class="col-12 hotel-loading">
          <div class="loading-spinner"></div>
        </div>
      `);

      $.ajax({
        url: "http://localhost:8080/api/v1/hotels/all",
        method: "GET",
        headers: { "Authorization": `Bearer ${localStorage.getItem("jwtToken")}` },
        success: function (res) {
          // Clear loading message
          $("#hotelsContainer").empty();

          // hotels might be in res.data or directly in res
          const hotels = res.data || res;

          if (!hotels || hotels.length === 0) {
            $("#hotelsContainer").html(`
              <div class="col-12 no-results">
                <i class="fas fa-hotel"></i>
                <h3>No Hotels Found</h3>
                <p>We couldn't find any hotels in our database.</p>
              </div>
            `);
            return;
          }

          // Filter by destination
          let filteredHotels = hotels.filter(h =>
            h.location?.toLowerCase().includes(destination.toLowerCase())
          );

          if (filteredHotels.length === 0) {
            $("#hotelsContainer").html(`
              <div class="col-12 no-results">
                <i class="fas fa-search"></i>
                <h3>No Hotels Match Your Search</h3>
                <p>Try adjusting your search criteria or browse all hotels.</p>
                <button class="btn btn-primary mt-3" onclick="$('#destination').val(''); fetchHotels();">
                  Show All Hotels
                </button>
              </div>
            `);
            return;
          }

          // Render hotels
          renderHotels(filteredHotels, people, checkin, checkout);
        },
        error: function () {
          $("#hotelsContainer").html(`
            <div class="col-12 no-results">
              <i class="fas fa-exclamation-triangle"></i>
              <h3>Failed to Load Hotels</h3>
              <p>Please try again later or contact support if the problem persists.</p>
            </div>
          `);
        }
      });
    }

    function renderHotels(hotels, roomType, checkin, checkout) {
      const hotelsContainer = $("#hotelsContainer");
      hotelsContainer.empty();

      const fallbackImage = './assets/images/colombo.jpeg';

      hotels.forEach(hotel => {
        // Build full image URL if missing or invalid
        let imageUrl = fallbackImage;
        if (hotel.image) {
          if (hotel.image.startsWith('http')) {
            imageUrl = hotel.image;
          } else {
            imageUrl = `./assets/images/colombo.jpeg`;
          }
        }

        // Generate random rating for demo purposes
        const rating = Math.floor(Math.random() * 2) + 4; // 4 or 5 stars
        
        const hotelCard = `
          <div class="col-lg-6 col-xl-4" data-aos="fade-up">
            <div class="hotel-card">
              <img src="${imageUrl}" 
                   class="hotel-image" 
                   alt="${hotel.name}"
                   onerror="this.onerror=null; this.src='${fallbackImage}'">
              <div class="card-body">
                <h5 class="card-title">${hotel.name}</h5>
                <div class="rating">
                  ${'<i class="fas fa-star"></i>'.repeat(rating)}
                  ${'<i class="far fa-star"></i>'.repeat(5 - rating)}
                  <span class="ms-2">${rating}.0</span>
                </div>
                <p class="hotel-location">
                  <i class="fas fa-map-marker-alt"></i> ${hotel.location}
                </p>
                <p class="hotel-description">${hotel.description || "Experience luxury and comfort at this beautiful property."}</p>
                <button type="button" class="btn seeAvailability" 
                        data-hotel-id="${hotel.id}" 
                        data-hotel-name="${hotel.name}"
                        data-hotel-location="${hotel.location}"
                        data-hotel-description="${hotel.description}"
                        data-hotel-image="${hotel.image}"
                        data-room-type="${roomType}"
                        data-checkin="${checkin}"
                        data-checkout="${checkout}">
                  <i class="fas fa-calendar-check me-2"></i>Check Availability
                </button>
              </div>
            </div>
          </div>
        `;

        hotelsContainer.append(hotelCard);
      });
    }

    // Click handler for "Check Availability" button
    $(document).on("click", ".seeAvailability", function () {
      // Store all hotel data in localStorage
      const hotelData = {
        id: $(this).data("hotel-id"),
        name: $(this).data("hotel-name"),
        location: $(this).data("hotel-location"),
        description: $(this).data("hotel-description"),
        image: $(this).data("hotel-image"),
        roomType: $(this).data("room-type"),
        checkin: $(this).data("checkin"),
        checkout: $(this).data("checkout")
      };

      localStorage.setItem("selectedHotel", JSON.stringify(hotelData));
      
      // Navigate to hotel details page after a brief delay
      setTimeout(() => {
        window.location.href = "Hotel.html";
      }, 500);
    });

    function logout() {
      Swal.fire({
        title: 'Logout',
        text: 'Are you sure you want to logout?',
        icon: 'question',
        showCancelButton: true,
        confirmButtonColor: '#3085d6',
        cancelButtonColor: '#d33',
        confirmButtonText: 'Yes, logout!'
      }).then((result) => {
        if (result.isConfirmed) {
          // Clear all stored data related to user session & search
          localStorage.removeItem("jwtToken");
          localStorage.removeItem("checkin");
          localStorage.removeItem("checkout");
          localStorage.removeItem("destination");
          localStorage.removeItem("email");
          localStorage.removeItem("people");
          localStorage.removeItem("role");
          localStorage.removeItem("selectedHotel");

          showAlert('success', 'Logged Out', 'You have been successfully logged out');
          
          setTimeout(() => {
            window.location.href = "Login.html";
          }, 1500);
        }
      });
    }
  </script>
</body>
</html>